{
  "version": "1.0.0",
  "coverage_tag": "baseline_v1",
  "dec_ref": "DEC-20250812-02",
  "scenario_count": 10,
  "scenarios": [
    {
      "id": "S1",
      "description": "Immediate severe entry (<0.50) leads to ACTIVE",
      "sequence": [
        0.49
      ],
      "expected": {
        "final_state": "ACTIVE",
        "entry_reason": "severe"
      },
      "result": {
        "final_state": "ACTIVE",
        "entry_reason": "severe",
        "transitions": [
          {
            "idx": 0,
            "ratio": 0.49,
            "type": "ENTER",
            "reason": "severe"
          }
        ],
        "detection_delay_snapshots": 0
      },
      "pass": true
    },
    {
      "id": "S2",
      "description": "Single borderline snapshot remains CANDIDATE",
      "sequence": [
        0.55
      ],
      "expected": {
        "final_state": "CANDIDATE"
      },
      "result": {
        "final_state": "CANDIDATE",
        "entry_reason": null,
        "transitions": [],
        "detection_delay_snapshots": null
      },
      "pass": true
    },
    {
      "id": "S3",
      "description": "Two consecutive borderline snapshots promote to ACTIVE (consecutive)",
      "sequence": [
        0.58,
        0.59,
        0.59
      ],
      "expected": {
        "final_state": "ACTIVE",
        "entry_reason": "consecutive"
      },
      "result": {
        "final_state": "ACTIVE",
        "entry_reason": "consecutive",
        "transitions": [
          {
            "idx": 1,
            "ratio": 0.59,
            "type": "ENTER",
            "reason": "consecutive"
          }
        ],
        "detection_delay_snapshots": 1
      },
      "pass": true
    },
    {
      "id": "S4",
      "description": "Borderline then high ratio aborts candidate back to NONE",
      "sequence": [
        0.58,
        0.62
      ],
      "expected": {
        "final_state": "NONE"
      },
      "result": {
        "final_state": "NONE",
        "entry_reason": null,
        "transitions": [],
        "detection_delay_snapshots": null
      },
      "pass": true
    },
    {
      "id": "S5",
      "description": "Severe entry then exit when ratio >= T_exit",
      "sequence": [
        0.49,
        0.52,
        0.66
      ],
      "expected": {
        "final_state": "CLEARED"
      },
      "result": {
        "final_state": "CLEARED",
        "entry_reason": "severe",
        "transitions": [
          {
            "idx": 0,
            "ratio": 0.49,
            "type": "ENTER",
            "reason": "severe"
          },
          {
            "idx": 2,
            "ratio": 0.66,
            "type": "EXIT"
          }
        ],
        "detection_delay_snapshots": 0
      },
      "pass": true
    },
    {
      "id": "S6",
      "description": "Consecutive borderline entry then no exit (stays ACTIVE)",
      "sequence": [
        0.55,
        0.56,
        0.56,
        0.57
      ],
      "expected": {
        "final_state": "ACTIVE"
      },
      "result": {
        "final_state": "ACTIVE",
        "entry_reason": "consecutive",
        "transitions": [
          {
            "idx": 1,
            "ratio": 0.56,
            "type": "ENTER",
            "reason": "consecutive"
          }
        ],
        "detection_delay_snapshots": 1
      },
      "pass": true
    },
    {
      "id": "S7",
      "description": "Exit then one snapshot cooldown, then borderline -> CANDIDATE (cooldown length=1)",
      "sequence": [
        0.49,
        0.7,
        0.7,
        0.57
      ],
      "expected": {
        "final_state": "CANDIDATE"
      },
      "result": {
        "final_state": "CANDIDATE",
        "entry_reason": "severe",
        "transitions": [
          {
            "idx": 0,
            "ratio": 0.49,
            "type": "ENTER",
            "reason": "severe"
          },
          {
            "idx": 1,
            "ratio": 0.7,
            "type": "EXIT"
          }
        ],
        "detection_delay_snapshots": 0
      },
      "pass": true
    },
    {
      "id": "S8",
      "description": "Exit then severe ratio triggers REENTER while in cooldown (engine behavior)",
      "sequence": [
        0.49,
        0.7,
        0.49
      ],
      "expected": {
        "final_state": "ACTIVE"
      },
      "result": {
        "final_state": "ACTIVE",
        "entry_reason": "severe",
        "transitions": [
          {
            "idx": 0,
            "ratio": 0.49,
            "type": "ENTER",
            "reason": "severe"
          },
          {
            "idx": 1,
            "ratio": 0.7,
            "type": "EXIT"
          },
          {
            "idx": 2,
            "ratio": 0.49,
            "type": "REENTER",
            "reason": "severe"
          }
        ],
        "detection_delay_snapshots": 0
      },
      "pass": true
    },
    {
      "id": "S9",
      "description": "Multiple severe re-entries (churn example)",
      "sequence": [
        0.49,
        0.7,
        0.49,
        0.7,
        0.49
      ],
      "expected": {
        "final_state": "ACTIVE"
      },
      "result": {
        "final_state": "ACTIVE",
        "entry_reason": "severe",
        "transitions": [
          {
            "idx": 0,
            "ratio": 0.49,
            "type": "ENTER",
            "reason": "severe"
          },
          {
            "idx": 1,
            "ratio": 0.7,
            "type": "EXIT"
          },
          {
            "idx": 2,
            "ratio": 0.49,
            "type": "REENTER",
            "reason": "severe"
          },
          {
            "idx": 3,
            "ratio": 0.7,
            "type": "EXIT"
          },
          {
            "idx": 4,
            "ratio": 0.49,
            "type": "REENTER",
            "reason": "severe"
          }
        ],
        "detection_delay_snapshots": 0
      },
      "pass": true
    },
    {
      "id": "S10",
      "description": "No activation path (all high ratios)",
      "sequence": [
        0.7,
        0.72,
        0.74
      ],
      "expected": {
        "final_state": "NONE"
      },
      "result": {
        "final_state": "NONE",
        "entry_reason": null,
        "transitions": [],
        "detection_delay_snapshots": null
      },
      "pass": true
    }
  ]
}